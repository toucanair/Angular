!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-smart-popover",["exports","@angular/core","@angular/common"],e):e((t=t||self)["ngx-smart-popover"]={},t.ng.core,t.ng.common)}(this,function(t,e,o){"use strict";var i=function(){function t(){}return t.Bottom="bottom",t.BottomLeft="bottom-left",t.BottomRight="bottom-right",t.Left="left",t.Right="right",t.Top="top",t.TopLeft="top-left",t.TopRight="top-right",t}(),n=function(){function t(t,o,n){var s=this;this.element=t,this.cdr=o,this.renderer=n,this.placement=i.Top,this.animation=!0,this.closeOnClickOutside=!1,this.closeOnMouseOutside=!1,this.size="small",this.onCloseFromOutside=new e.EventEmitter,this.top=-1e4,this.left=-1e4,this.isIn=!1,this.displayType="none",this.opacity=0,this.transitionEnabled=!1,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.onDocumentMouseDown=function(t){var e=s.element.nativeElement;e&&s.popover&&(e.contains(t.target)||s.popover.getElement().contains(t.target)||s.onCloseFromOutside.emit(undefined))}}return t.prototype.ngAfterViewInit=function(){var t=this;this.closeOnClickOutside&&(this.listenClickFunc=this.renderer.listen("document","mousedown",function(e){return t.onDocumentMouseDown(e)})),this.closeOnMouseOutside&&(this.listenMouseFunc=this.renderer.listen("document","mouseover",function(e){return t.onDocumentMouseDown(e)})),this.listenTouchFunc=this.renderer.listen("document","touchstart",function(e){return t.onDocumentMouseDown(e)}),this.show(),this.cdr.detectChanges()},t.prototype.ngOnDestroy=function(){this.closeOnClickOutside&&this.listenClickFunc&&this.listenClickFunc(),this.closeOnMouseOutside&&this.listenMouseFunc&&this.listenMouseFunc(),this.listenTouchFunc&&this.listenTouchFunc()},t.prototype.updatePosition=function(){if(this.opacity){var t=this.positionElements(this.popover.getElement(),this.popoverDiv.nativeElement,this.placement);this.top=t.top,this.left=t.left}},t.prototype.show=function(){if(this.popover&&this.popover.getElement()){var t=this.positionElements(this.popover.getElement(),this.popoverDiv.nativeElement,this.placement);this.displayType="block",this.top=t.top,this.left=t.left,this.isIn=!0,this.transitionEnabled=!0,this.opacity=1}},t.prototype.hide=function(){this.top=-1e4,this.left=-1e4,this.isIn=!0,this.popover.hide()},t.prototype.hideFromPopover=function(){this.top=-1e4,this.left=-1e4,this.isIn=!0,this.transitionEnabled=!1,this.opacity=0},t.prototype.positionElements=function(t,e,o,n){void 0===n&&(n=!1);var s=o.split(" "),r=s[0],p=s[1]||"center",h=n?this.offset(t):this.position(t),f=e.offsetWidth,u=e.offsetHeight;this.effectivePlacement=r=this.getEffectivePlacement(r,t,e);var l,c={center:function(){return h.left+h.width/2-f/2},left:function(){return h.left},right:function(){return h.left+h.width},topOrBottomRight:function(){return h.left+h.width/2},topOrBottomLeft:function(){return h.left-f+h.width/2}},d={center:function(){return h.top+h.height/2-u/2},top:function(){return h.top},bottom:function(){return h.top+h.height}};switch(r){case i.Right:l={top:d[p](),left:c[r]()};break;case i.Left:l={top:d[p](),left:h.left-f};break;case i.Bottom:l={top:d[r](),left:c[p]()};break;case i.TopLeft:l={top:h.top-u,left:c.topOrBottomLeft()};break;case i.TopRight:l={top:h.top-u,left:c.topOrBottomRight()};break;case i.BottomLeft:l={top:d[i.Bottom](),left:c.topOrBottomLeft()};break;case i.BottomRight:l={top:d[i.Bottom](),left:c.topOrBottomRight()};break;default:l={top:h.top-u,left:c[p]()}}return l},t.prototype.position=function(t){var e={top:0,left:0},o=this.offset(t),i=this.parentOffsetEl(t);i!==window.document&&((e=this.offset(i)).top+=i.clientTop-i.scrollTop,e.left+=i.clientLeft-i.scrollLeft);var n=t.getBoundingClientRect();return{width:n.width||t.offsetWidth,height:n.height||t.offsetHeight,top:o.top-e.top,left:o.left-e.left}},t.prototype.offset=function(t){var e=t.getBoundingClientRect();return{width:e.width||t.offsetWidth,height:e.height||t.offsetHeight,top:e.top+(window.pageYOffset||window.document.documentElement.scrollTop),left:e.left+(window.pageXOffset||window.document.documentElement.scrollLeft)}},t.prototype.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t)[e]:t.style[e]},t.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},t.prototype.parentOffsetEl=function(t){for(var e=t.offsetParent||window.document;e&&e!==window.document&&this.isStaticPositioned(e);)e=e.offsetParent;return e||window.document},t.prototype.getEffectivePlacement=function(t,e,o){var n=e.getBoundingClientRect(),s=t||i.Top;if(s===i.Top){var r=n.top-o.offsetHeight<0,p=n.left+n.width/2+o.offsetWidth/2>this.windowWidth,h=n.left+n.width/2-o.offsetWidth/2<0;if(r)return i.Bottom;if(p)return i.TopLeft;if(h)return i.TopRight}if(s===i.Bottom){p=n.left+n.width/2+o.offsetWidth/2>this.windowWidth,h=n.left+n.width/2-o.offsetWidth/2<0;if(f=n.bottom+o.offsetHeight>this.windowHeight)return i.Top;if(p)return i.BottomLeft;if(h)return i.BottomRight}if(s===i.Left){r=n.top+n.height/2-o.offsetHeight/2<0,h=n.left-o.offsetWidth<0;var f=n.top+n.height/2+o.offsetHeight/2>this.windowHeight;if(h)return i.Right;if(r)return i.BottomLeft;if(f)return i.TopLeft}if(s===i.Right){r=n.top+n.height/2-o.offsetHeight/2<0,p=n.right+o.offsetWidth>this.windowWidth,f=n.top+n.height/2+o.offsetHeight/2>this.windowHeight;if(p)return i.Left;if(r)return i.BottomRight;if(f)return i.TopRight}if(s===i.TopRight){r=n.top-o.offsetHeight<0,p=n.right+o.offsetWidth>this.windowWidth;if(r&&p)return i.BottomLeft;if(r)return i.BottomRight;if(p)return i.TopLeft}if(s===i.TopLeft){r=n.top-o.offsetHeight<0,h=n.left-o.offsetWidth<0;if(r&&h)return i.BottomRight;if(r)return i.BottomLeft;if(h)return i.TopRight}if(s===i.BottomRight){f=n.bottom+o.offsetHeight>this.windowHeight,p=n.right+o.offsetWidth>this.windowWidth;if(f&&p)return i.TopLeft;if(f)return i.TopRight;if(p)return i.BottomLeft}if(s===i.BottomLeft){f=n.bottom+o.offsetHeight>this.windowHeight,h=n.left-o.offsetWidth<0;if(f&&h)return i.TopRight;if(f)return i.TopLeft;if(h)return i.BottomRight}return s},t.decorators=[{type:e.Component,args:[{selector:"popover-content",template:'\n    <div #popoverDiv\n        class="bs-popover-{{ effectivePlacement }} popover-content popover {{ parentClass }}"\n        [ngClass]="{\n            \'sm\': size === \'small\',\n            \'md-sm\': size === \'medium-small\',\n            \'md\': size === \'medium\',\n            \'lg\': size === \'large\'\n        }"\n        [style.top.px]="top"\n        [style.left.px]="left"\n        [style.transition]="(transitionEnabled ? \'0.15s opacity\' : \'\')"\n        [style.opacity]="opacity"\n        [style.display]="\'block\'"\n        [class.in]="isIn"\n        role="popover">\n            <div [hidden]="!closeOnMouseOutside" class="virtual-area"></div>\n            <div class="arrow"></div>\n            <div class="popover-header" [hidden]="!title">{{ title }}</div>\n            <div class="popover-body">\n                <ng-content></ng-content>\n                {{ content }}\n            </div>\n    </div>\n    '}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.ChangeDetectorRef},{type:e.Renderer2}]},t.propDecorators={content:[{type:e.Input}],placement:[{type:e.Input}],title:[{type:e.Input}],parentClass:[{type:e.Input}],animation:[{type:e.Input}],closeOnClickOutside:[{type:e.Input}],closeOnMouseOutside:[{type:e.Input}],size:[{type:e.Input}],popoverDiv:[{type:e.ViewChild,args:["popoverDiv"]}]},t}(),s=function(){function t(t,o){this.viewContainerRef=t,this.resolver=o,this.popoverContentComponent=n,this.popoverOnHover=!0,this.popoverDismissTimeout=0,this.onShown=new e.EventEmitter,this.onHidden=new e.EventEmitter}return t.prototype.showOrHideOnClick=function(t){this.popoverOnHover||this.popoverDisabled||(t.stopImmediatePropagation(),this.toggle())},t.prototype.showOrHideOnTouch=function(t){t.stopImmediatePropagation(),this.popoverOnHover&&(this.popoverDisabled||this.toggle())},t.prototype.showOnHover=function(){this.popoverOnHover&&(this.popoverDisabled||this.show())},t.prototype.hideOnHover=function(){this.popoverCloseOnMouseOutside||this.popoverOnHover&&(this.popoverDisabled||this.hide())},t.prototype.ngOnChanges=function(t){t.popoverDisabled&&t.popoverDisabled.currentValue&&this.hide()},t.prototype.toggle=function(){this.visible?this.hide():this.show()},t.prototype.show=function(){var t=this;if(!this.visible){if(this.visible=!0,"string"==typeof this.content){var e=this.resolver.resolveComponentFactory(this.popoverContentComponent);if(!this.visible)return;this.popover=this.viewContainerRef.createComponent(e),(o=this.popover.instance).popover=this,o.content=this.content,this.popoverPlacement!==undefined&&(o.placement=this.popoverPlacement),this.popoverAnimation!==undefined&&(o.animation=this.popoverAnimation),this.popoverTitle!==undefined&&(o.title=this.popoverTitle),this.popoverCloseOnClickOutside!==undefined&&(o.closeOnClickOutside=this.popoverCloseOnClickOutside),this.popoverCloseOnMouseOutside!==undefined&&(o.closeOnMouseOutside=this.popoverCloseOnMouseOutside),this.popoverSize&&(o.size=this.popoverSize),o.onCloseFromOutside.subscribe(function(){return t.hide()}),this.popoverDismissTimeout>0&&setTimeout(function(){return t.hide()},this.popoverDismissTimeout)}else{var o;(o=this.content).popover=this,this.popoverPlacement!==undefined&&(o.placement=this.popoverPlacement),this.popoverAnimation!==undefined&&(o.animation=this.popoverAnimation),this.popoverTitle!==undefined&&(o.title=this.popoverTitle),this.popoverCloseOnClickOutside!==undefined&&(o.closeOnClickOutside=this.popoverCloseOnClickOutside),this.popoverCloseOnMouseOutside!==undefined&&(o.closeOnMouseOutside=this.popoverCloseOnMouseOutside),this.popoverSize&&(o.size=this.popoverSize),o.onCloseFromOutside.subscribe(function(){return t.hide()}),this.popoverDismissTimeout>0&&setTimeout(function(){return t.hide()},this.popoverDismissTimeout),o.show()}this.onShown.emit(this)}},t.prototype.hide=function(){this.visible&&(this.visible=!1,this.popover&&this.popover.destroy(),this.content instanceof n&&this.content.hideFromPopover(),this.onHidden.emit(this))},t.prototype.getElement=function(){return this.viewContainerRef.element.nativeElement},t.decorators=[{type:e.Directive,args:[{selector:"[popover]",exportAs:"popover"}]}],t.ctorParameters=function(){return[{type:e.ViewContainerRef},{type:e.ComponentFactoryResolver}]},t.propDecorators={content:[{type:e.Input,args:["popover"]}],popoverSize:[{type:e.Input}],popoverDisabled:[{type:e.Input}],popoverAnimation:[{type:e.Input}],popoverPlacement:[{type:e.Input}],popoverTitle:[{type:e.Input}],popoverOnHover:[{type:e.Input}],popoverCloseOnClickOutside:[{type:e.Input}],popoverCloseOnMouseOutside:[{type:e.Input}],popoverDismissTimeout:[{type:e.Input}],onShown:[{type:e.Output}],onHidden:[{type:e.Output}],showOrHideOnClick:[{type:e.HostListener,args:["click",["$event"]]}],showOrHideOnTouch:[{type:e.HostListener,args:["touchend",["$event"]]}],showOnHover:[{type:e.HostListener,args:["focusin"]},{type:e.HostListener,args:["mouseenter"]}],hideOnHover:[{type:e.HostListener,args:["focusout"]},{type:e.HostListener,args:["mouseleave"]}]},t}(),r=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[s,n],imports:[o.CommonModule],exports:[n,s],entryComponents:[n]}]}],t}();t.PopoverContentComponent=n,t.PopoverDirective=s,t.PopoverModule=r,t.PopoverPlacement=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-smart-popover.umd.min.js.map